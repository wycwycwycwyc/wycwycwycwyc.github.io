<!DOCTYPE html>  
<html>  
<head>  
    <title>抢车票（升级版）</title>  
    <link rel="stylesheet" href="styles.css">
    <script src="script.js"></script>  
    <script src="script1.js"></script>  
    <style>  
        pre {
            white-space: pre; /* 保持预格式化文本的原始格式，不换行 */
            word-wrap: normal; /* 取消单词在边界处的换行 */
            overflow-x: auto; /* 水平方向超出时显示滚动条 */
            max-width: 100%; /* 设置最大宽度，防止溢出 */
           max-height: 1000px; /* 设置最大高度，防止内容过长 */
        }
        body {  
            font-family: Arial, sans-serif;  
        }  
        .title {  
            text-align: center;  
            font-size: 24px;  
            margin-bottom: 20px;  
        }  
        .subtitle {
            font-size: 16px;
            color: #666;
            text-indent: 1em; /* 这里设置为3em，相当于3倍的字体大小，你可以根据需要调整这个值 */
        }
        .content {  
            background-color: #f2f2f2;  
            padding: 20px;  
            position: relative;  
            border-radius: 20px; /* 这里可以根据需要调整圆角的大小 */
        }
        .footer {  
            text-align: center;  
        }  
@keyframes fadeInBlur {
    0% {
        opacity: 0;
        filter: blur(20px);
        transform: translateY(50px); /* 开始时代码框在下方 */
    }
    50% {
        opacity: 1;
        filter: blur(0);
    }
    100% {
        transform: translateY(0); /* 结束时代码框回到原位 */
    }
}
/* 应用动画到源代码框 */
#sourceCode {
    animation: fadeInBlur 1s ease-in-out forwards; /* 动画持续时间、缓动函数和填充模式 */
}  
/* 自定义Python函数的样式 */
.hljs-keyword {
    color: #81E8EB;
}
/* 自定义变量的样式 */
.custom-variable {
    color: #F0C314 !important; /* 或者使用十六进制颜色代码，例如 #FFA500 */
}

/* 自定义字符串的样式 */
.hljs-string {
    color: green !important; /* 设置为蓝色，并且提高优先级 */
}
.hljs-comment {
    color: #EB64DE !important;
}
pre, code {
    font-size: 16px; /* 设置字体大小为14像素 */
}
    </style>
<!-- 引入样式文件 -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/styles/default.min.css">
<!-- 引入JavaScript文件 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/highlight.min.js"></script>  
</head>
<script>
document.addEventListener('DOMContentLoaded', function() {
    hljs.highlightAll();
});
</script> 
</head>  
<body>  
    <div class="title">抢车票（升级版）</div>  
    <button class="custom-button" onclick="openPage('index.html')">返回</button>  
    <br>  
    <br>  
    <br>  
    <div class="subtitle">源代码</div>  
    <div class="content">  
        <pre id="sourceCode"><code class="language-python custom-variable">
# 等待一段时间，以便操作系统可以处理终止的进程    
from selenium import webdriver  
from selenium.webdriver.common.keys import Keys  
from selenium.webdriver.common.by import By  
from selenium.webdriver.support.ui import WebDriverWait  
from selenium.webdriver.support import expected_conditions as EC  #导入相关库
from selenium.webdriver import ActionChains   
import time
from datetime import datetime
import subprocess
driver = webdriver.Chrome()
driver.get("https://kyfw.12306.cn/otn/resources/login.html")
while True:
    current_time = datetime.now()
    formatted_time = current_time.strftime("%H:%M:%S")
    if formatted_time == "10:32:50":
        driver.get("https://kyfw.12306.cn/otn/view/prefill_list.html?from=CUW&to=QRW&train=K1064&date=2024-02-04&fromName=%E9%87%8D%E5%BA%86%E5%8C%97&toName=%E6%B8%A0%E5%8E%BF")
        time.sleep(1.5)
        time.sleep(1)
        Button1 = driver.find_element(By.XPATH, "//*[@id=\"passenge_list\"]/li[7]/label/div/ins")
        Button1.click()
        Button2 = driver.find_element(By.XPATH, "//*[@id=\"panel-order-con\"]/div/div/a")
        Button2.click()
        time.sleep(2.7)
        Button3 = driver.find_element(By.XPATH, "//*[@id=\"trainList\"]/div[9]/div[2]/div/div[3]/div[4]/a")
        Button3.click()
        Button4 = driver.find_element(By.ID, "saveBtn")
        Button4.click()
        time.sleep(1)
        driver.get("https://kyfw.12306.cn/otn/view/prefill_order.html?fromName=%E9%87%8D%E5%BA%86%E5%8C%97&from=CUW&toName=%E6%B8%A0%E5%8E%BF&to=QRW&date=2024-02-04")
        time.sleep(2)
        while True:   
            count_down_text = driver.find_element(By.CLASS_NAME, 'count-down-text')
            if count_down_text == "1秒":
                time.sleep(1.3)
                button6 = driver.find_element(By.CSS_SELECTOR, "btn btn-hollow btn-sm w120 buy-ticket-button")  
                button6.click()
                button7 = driver.find_element(By.XPATH, "//*[@id=\"pop_170556355537687123\"]/div[2]/div[3]/a[2]")  
                button7.click()
                break
            else:
                continue
    else:
        continue</code></pre>    
        <button id="copyCodeBtn" class="custom-button" onclick="copySourceCode()" style="position: absolute; top: 10px; right: 10px;">复制源代码</button>  <!-- 这里是修改的地方 -->    
    </div>  
    <div class="footer">
        <br>  
        <button class="custom-button" onclick="openPage('http://2frp.bibl.love:24755/')">下载源代码</button>    
    </div> <!-- 这里是修复的地方 -->    
</body>  
</html>
