<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>设置</title><link rel=stylesheet href=styles.css><link rel=stylesheet href=styles3.css><link rel=stylesheet href=styles4.css><link rel=stylesheet href=styles5.css><link rel=stylesheet href=styles6.css><script src=script4.js></script><script src=script5.js></script><script src=script6.js></script><script src=script7.js></script><script src=script8.js></script><script src=script9.js></script><script src=script10.js></script><script src=script11.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js></script><link href=message.min.css rel=stylesheet><script src=message.min.js></script><style>html{scroll-behavior:smooth}body{font-family:Arial,sans-serif;margin:0;padding:0;background-color:#f4f4f4;transition:background-color .5s,color .5s}@keyframes fadeIn{from{opacity:0}to{opacity:1}}.sidebar{height:100%;width:250px;position:fixed;top:0;left:0;background-color:#fff;padding-top:20px;transition:width .3s,background-color .5s}.sidebar{opacity:1;transform:translateX(0)}.sidebar.hide{opacity:0;transform:translateX(-100%)}.sidebar a{padding:10px 15px;text-decoration:none;font-size:18px;color:#333;display:block;transition:background-color .3s,color .5s}.sidebar a:hover{background-color:#f0f0f0}.content{margin-left:250px;padding:20px}.section{margin-bottom:20px}.section h2{margin-top:0}.toggle-switch{position:relative;display:inline-block;width:60px;height:34px}.toggle-switch input{display:none}.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.4s;border-radius:34px}.slider:before{position:absolute;content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;transition:.4s;border-radius:50%}input:checked+.slider{background-color:#2196f3}input:checked+.slider:before{transform:translateX(26px)}.input-group{margin-bottom:10px}.input-group label{display:block;margin-bottom:5px}.bake{position:relative;left:10px}.input-group input{width:100%;padding:8px;box-sizing:border-box}.styled-select{width:70px;padding:10px;border:1px solid #ccc;border-radius:4px;background-color:#fff;font-size:16px;color:#333;appearance:none;-webkit-appearance:none;-moz-appearance:none;background-image:url(data:image/svg+xml;utf8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0IDUiPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzMyIgc3Ryb2tlLXdpZHRoPSIuNSIgZD0iTTIgMCAwIDJoNHptMCA1TDAgM2g0eiIvPjwvc3ZnPg==);background-repeat:no-repeat;background-position:right 10px center;background-size:10px 10px;transition:all .3s ease}.styled-select1{width:100px;padding:10px;border:1px solid #ccc;border-radius:4px;background-color:#fff;font-size:16px;color:#333;appearance:none;-webkit-appearance:none;-moz-appearance:none;background-image:url(data:image/svg+xml;utf8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0IDUiPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzMyIgc3Ryb2tlLXdpZHRoPSIuNSIgZD0iTTIgMCAwIDJoNHptMCA1TDAgM2g0eiIvPjwvc3ZnPg==);background-repeat:no-repeat;background-position:right 10px center;background-size:10px 10px;transition:all .3s ease}.styled-select:focus{border-color:#2196f3;box-shadow:0 0 5px #2196f380;outline:none}.intro-box{width:100% - 10px;border:1px solid #ccc;padding:20px;left:250;background-color:#f9f9f9;border-radius:5px;word-wrap:break-word;transition:background-color .5s,color .5s}.explanation-trigger{width:90%;padding:5px;font-size:16px;text-align:left;cursor:pointer;border:1px solid #ccc;background-color:#f8f8f8;margin-bottom:5px;border-radius:5px;transition:background-color .3s}.explanation-trigger:hover{background-color:#e0e0e0}.explanation{display:none;width:83%;background-color:#f9f9f9;border:1px solid #ccc;padding:40px;margin-top:10px;border-radius:5px;box-shadow:0 2px 4px #0000001a;margin-top:-20px;transition:max-height .5s ease,opacity .5s ease,transform .5s ease;max-height:0}.explanation.visible{display:block;max-height:200px;opacity:1;transform:translateY(0)}.styled-select option{transition:all .3s ease}@media only screen and (max-width:768px){.sidebar{width:100px}.sidebar a{font-size:16px;padding:10px 20px;color:#000}.content{margin-left:100px;padding:10px}.explanation{width:40%;padding:80px;margin-top:-80px}#Previewsection h3{right:30%!important}}body.dark-mode{background-color:#1a1a1a;color:#f4f4f4}body.dark-mode .sidebar{background-color:#333}body.dark-mode .sidebar a{color:#f4f4f4}body.dark-mode .sidebar a:hover{background-color:#444}body.dark-mode .slider{background-color:#555}body.dark-mode .slider:before{background-color:#ccc}body.dark-mode input:checked+.slider{background-color:#2196f3}body.dark-mode input:checked+.slider:before{background-color:#fff}body.no-animation *{transition:none!important;animation:none!important}body.no-animation *:before,body.no-animation *:after{transition:none!important;animation:none!important}body.dark-mode .intro-box{background-color:#333;border-color:#555}body.dark-mode .styled-select{border:1px solid #555;background-color:#333;color:#f4f4f4;background-image:url(data:image/svg+xml;utf8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0IDUiPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2Y0ZjRmNCIgc3Ryb2tlLXdpZHRoPSIuNSIgZD0iTTIgMCAwIDJoNHptMCA1TDAgM2g0eiIvPjwvc3ZnPg==)}body.dark-mode .styled-select1{border:1px solid #555;background-color:#333;color:#f4f4f4;background-image:url(data:image/svg+xml;utf8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0IDUiPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2Y0ZjRmNCIgc3Ryb2tlLXdpZHRoPSIuNSIgZD0iTTIgMCAwIDJoNHptMCA1TDAgM2g0eiIvPjwvc3ZnPg==)}body.dark-mode .styled-select:focus{border-color:#2196f3;box-shadow:0 0 5px #2196f380;outline:none}.input-group{margin-bottom:10px}.input-group1{margin-bottom:10px;display:flex;align-items:center}.input-group label{display:block;margin-bottom:5px}.input-group input,.input-group select{width:60px;padding:8px;box-sizing:border-box}.input-group input{width:100%;transition:background-color .5s,color .5s}body.dark-mode .input-group input{background-color:#333;color:#fff;border:1px solid #444}.input-group1 input,.input-group1 select{width:60px;padding:8px;box-sizing:border-box}.input-group1 input[type=range]{width:calc(100% - 60px);display:inline-block}.input-group1 input[type=number]{width:60px;display:inline-block;margin-left:0;border-radius:5px;border:1px solid #ccc;padding:7px;box-sizing:border-box;transition:background-color .5s,color .5s}body.dark-mode .input-group input[type=number]{background-color:#333;color:#fff;border:1px solid #444}body.dark-mode .input-group1 input[type=number]{background-color:#333;color:#fff;border:1px solid #444}body.dark-mode .explanation-trigger{background-color:#1a1a1a;color:#fff;border-color:#333}body.dark-mode .explanation-trigger:hover{background-color:#222}body.dark-mode .explanation{background-color:#222;color:#fff;border-color:#333;box-shadow:0 2px 4px #ffffff1a}.user-name-text{font-weight:700;color:#000;text-decoration:none;font-weight:700;transition:color .3s}.password-link a{color:#337ab7;text-decoration:none;font-weight:700;transition:color .3s}#developer-link{color:#000;text-decoration:none;transition:background-color .5s,color .5s}body.dark-mode #developer-link{color:#f4f4f4;text-decoration:none}@-webkit-keyframes rotate-top{0%{-webkit-transform:rotate(0);transform:rotate(0);-webkit-transform-origin:top;transform-origin:top}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg);-webkit-transform-origin:top;transform-origin:top}}@keyframes rotate-top{0%{-webkit-transform:rotate(0);transform:rotate(0);-webkit-transform-origin:top;transform-origin:top}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg);-webkit-transform-origin:top;transform-origin:top}}#userTableContainer{width:100%;max-height:400px;overflow-y:auto}#userTableContainer table{width:100%;border-collapse:collapse;margin-top:10px;-webkit-animation:rotate-top .5s cubic-bezier(.455,.03,.515,.955) both;animation:rotate-top .5s cubic-bezier(.455,.03,.515,.955) both}#userTableContainer th,#userTableContainer td{border:1px solid #ddd;padding:8px;text-align:left}#userTableContainer th{background-color:#007bff;color:#fff;border:none;position:sticky;top:0}.input_info{width:auto;background-color:#ffffffbe;border:none;border-radius:5px;color:#000;padding:10px 15px;font-size:16px;box-shadow:0 2px 4px #007bff33;transition:box-shadow .3s ease,transform .3s ease,background-color .5s,color .5s;outline:none}.input_info:hover{box-shadow:0 4px 8px #007bff4d;transform:translateY(-2px)}.input_info:focus{box-shadow:0 6px 12px #007bff66;transform:translateY(-3px)}.dark-mode .input_info{background-color:#414141;color:#fff;box-shadow:0 2px 4px #fff3}.dark-mode .input_info:hover{box-shadow:0 4px 8px #ffffff4d}.dark-mode .input_info:focus{box-shadow:0 6px 12px #fff6}.dark-mode .user-name-text{color:#fff}.newuser{width:100%;background-color:#007bff;color:#fff;border:none;border-radius:0 0 10px 10px}#userTableContainer{position:relative}.reloadtable{position:absolute;right:0;top:999999;background-color:#007bff;color:#fff;border:none;border-radius:5px 5px 5px 5px;transform:translate(-20px,-30px)}@-webkit-keyframes tilt-in-fwd-tr{0%{-webkit-transform:rotateY(20deg) rotateX(35deg) translate(300px,-300px) skew(-35deg,10deg);transform:rotateY(20deg) rotateX(35deg) translate(300px,-300px) skew(-35deg,10deg);opacity:0}100%{-webkit-transform:rotateY(0) rotateX(0deg) translate(0,0) skew(0deg,0deg);transform:rotateY(0) rotateX(0deg) translate(0,0) skew(0deg,0deg);opacity:1}}@keyframes tilt-in-fwd-tr{0%{-webkit-transform:rotateY(20deg) rotateX(35deg) translate(300px,-300px) skew(-35deg,10deg);transform:rotateY(20deg) rotateX(35deg) translate(300px,-300px) skew(-35deg,10deg);filter:blur(10px);opacity:0}100%{-webkit-transform:rotateY(0) rotateX(0deg) translate(0,0) skew(0deg,0deg);transform:rotateY(0) rotateX(0deg) translate(0,0) skew(0deg,0deg);filter:blur(0px);opacity:1}}body{-webkit-animation:tilt-in-fwd-tr .8s cubic-bezier(0.250,0.460,0.450,0.940) none;animation:tilt-in-fwd-tr .8s cubic-bezier(0.250,0.460,0.450,0.940) none}@keyframes slideInFromRight{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}.terminal-container{width:100%;margin:0;background-color:#1e1e1e;border-radius:5px;overflow:hidden;box-shadow:0 0 20px #00000080;font-family:consolas,monaco,courier new,monospace;margin-bottom:20px}.terminal-header{background-color:#333;padding:8px 15px;display:flex;align-items:center}.terminal-buttons{display:flex;gap:8px;margin-right:15px}.terminal-button{width:12px;height:12px;border-radius:50%;display:inline-block}.terminal-button.close{background-color:#ff5f56}.terminal-button.minimize{background-color:#ffbd2e}.terminal-button.maximize{background-color:#27c93f}.terminal-title{color:#aaa;font-size:12px;flex-grow:1}.terminal-body{height:400px;overflow-y:auto;padding:10px;color:#f0f0f0;font-size:14px;line-height:1.5;white-space:pre-wrap}.terminal-line{margin-bottom:5px;word-break:break-all;display:flex}.terminal-prompt{color:#4caf50;margin-right:8px;white-space:nowrap}.terminal-input-line{display:flex;align-items:center}.terminal-cursor{display:inline-block;width:8px;height:16px;background-color:#f0f0f0;animation:blink 1s infinite}@keyframes blink{0%,100%{opacity:1}50%{opacity:0}}.command-output{color:#f0f0f0}.command-error{color:#f55}.terminal-body::-webkit-scrollbar{width:8px}.terminal-body::-webkit-scrollbar-track{background:#252525}.terminal-body::-webkit-scrollbar-thumb{background:#555;border-radius:4px}.terminal-body::-webkit-scrollbar-thumb:hover{background:#666}body.dark-mode .terminal-container{background-color:#1e1e1e}body.dark-mode .terminal-header{background-color:#333}body.dark-mode .terminal-body{color:#f0f0f0}</style><div class=sidebar id=sidebar><button class="custom-button bake" onclick=goBackOrHome()>返回</button>
<a id=appearance-si href=#appearance>外观</a>
<a id=display-si href=#display>显示</a>
<a id=settingsData-si href=#settingsData>设置数据</a>
<a id=account-si href=#account>账户</a>
<a id=section-si href=#section>功能说明</a>
<a id=developers style=display:none href=#developer>开发者选项</a>
<a id=about-si href=#about>关于</a></div><div class=content id=content><div id=appearance class=section><h1>外观</h1><div style=position:static;top:0;right:0;width:40%;height:100% id=Previewsection><h3 style=position:absolute;right:20%;top:10px;display:inline id=PreviewTitle>预览</h3><button class=custom-button style=position:absolute;right:10px;top:20px onclick="document.getElementById('Preview').contentWindow.location.reload();Qmsg.success('更新成功')">更新预览</button>
<iframe src=index.html?preview id=Preview style="position:absolute;right:10px;top:70px;width:40%;height:300px;border-radius:10px 10px 10px 10px;pointer-events:none"><p>你的浏览器不支持预览</iframe></div><div class=input-group><label for=darkModeToggle>深色模式</label>
<label class=toggle-switch><input type=checkbox id=darkModeToggle>
<span class=slider></span></label></div><div class="input-group toggle-with-select"><h2>动画</h2><label for=animationToggle class=toggle-label>开关</label><div class=toggle-controls><label class=toggle-switch><input type=checkbox id=animationToggle>
<span class=slider></span></label><p>速度(仅部分生效)</p><select id=animationSpeed class=styled-select>
<option value=0.5>0.5x
<option value=1 selected>1x
<option value=2>2x
<option value=5>5x</select></div></div><div class=input-group><label for=glowToggle>泛光与阴影</label>
<label class=toggle-switch><input type=checkbox id=glowToggle>
<span class=slider></span></label></div><div class=input-group><label for=code>更好的代码显示</label>
<label class=toggle-switch><input type=checkbox id=settingscode>
<span class=slider></span></label></div><div class=input-group1><label for=opacityRange>可见度</label>
<input type=range id=opacityRange min=0 max=100 step=1>
<input type=number id=opacityNumber min=0 max=100 step=1 <p>%<p></div><div class=input-group1><label for=blurRange>模糊度(模糊半径)</label>
<input type=raznge id=blurRange min=0 max=50 step=1>
<input type=number id=blurNumber min=0 max=50 step=1 <p>px<p></div><h2>主页背景</h2><div class=input-group>浅色模式背景图片URL<input id=lightModeBgUrl placeholder=输入浅色模式背景图片URL(留空默认)></div><div class=input-group>深色模式背景图片URL<input id=darkModeBgUrl placeholder=输入深色模式背景图片URL(留空默认)></div><button id=isDarkModeimg class=custom-button>应用</button></div><div id=display class=section><h1>显示</h1><label for=fontSizeSelect>字体大小</label>
<select id=fontSizeSelect class=styled-select>
<option value=small>小
<option value=medium selected>中
<option value=large>大
<option value=x-large>特大</select><div class=input-group><br><label for=eyeCareToggle>护眼模式</label>
<label class=toggle-switch><input type=checkbox id=eyeCareToggle>
<span class=slider></span></label><div class=input-group1><label for=brightness>亮度</label>
<input type=range id=brightnessRange min=10 max=100 step=1>
<input type=number id=brightnessNumber min=10 max=100 step=1 <p>%<p></div></div></div><div id=settingsData class=section><h1>设置数据</h1><div><div>深色模式设置数据&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<button onclick=clearDarkMode() class=custom-button>清除</button></div><br><div>动画设置数据&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;
<button onclick=clearAnimation() class=custom-button>清除</button></div><br><div>泛光设置数据&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;
<button onclick=clearglowToggle() class=custom-button>清除</button></div><br><div>更好的代码显示设置数据
<button onclick=clearcode() class=custom-button>清除</button></div><br><div>可见度设置数据&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;
<button onclick=clearVisibility() class=custom-button>清除</button></div><br><div>字体大小设置数据&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;
<button onclick=clearFontSize() class=custom-button>清除</button></div><br><div>护眼模式设置数据&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;
<button onclick=clearEyeCare() class=custom-button>清除</button></div><br><div>亮度设置数据&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;
<button onclick=clearBrightness() class=custom-button>清除</button></div><br><div>登录信息&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;
<button onclick=clearLoginInfo() class=custom-button>清除</button></div><br><div>所有设置数据&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;
<button onclick=clearAllSettings() class=custom-button>清除</button></div></div></div><div id=account style=height:200px class=section><h1>账户</h1><button id=loginStatus onclick="openPage('./uploadicon.html')" style=width:90px;height:90px;border-radius:50%;border:none;font-size:16px;cursor:pointer;outline:none;display:inline;vertical-align:middle;margin-right:10px;background-size:cover;background-repeat:no-repeat;background-position:50%;transform:translate(5px,15px)></button><div style=width:90%;display:flex;flex-wrap:wrap;transform:translate(110px,-70px);overflow-x:auto><div id=username class=username style=display:block;vertical-align:middle;margin-bottom:20px></div><div style=flex-basis:100%></div><div id=email class=email style=display:block;vertical-align:middle;margin-bottom:20px></div><div style=flex-basis:100%></div><div id=passwordLink class=password-link></div><br><br><a style="color:#337ab7;text-decoration:none;font-weight:700;transition:color .3s;margin-left:30px" href=forgotPassword.html>忘记密码</a><div style=flex-basis:100%></div><a id=sa style="color:#337ab7;text-decoration:none;font-weight:700;transition:color .3s" onclick=sa()>切换账号</a></p><a id=logout style="color:#337ab7;text-decoration:none;font-weight:700;transition:color .3s;margin-left:30px" onclick=logout()>注销用户</a></div><button id=logoutButton class="logout-btn custom-button" style=transform:translateY(-120px)>退出登录</button>
<button id=loginButton class="login-btn custom-button" style=transform:translateY(-110px)>登录</button></div><br><div id=section><h1>功能说明</h1><div class=intro-box><h2>深色模式设置数据</h2><button class=explanation-trigger data-target=darkModeHelp>说明</button><div class=explanation id=darkModeHelp style=display:none>深色模式提供了更加舒适的夜间浏览体验，减少屏幕亮度对眼睛的刺激。启用后，界面将以深色背景和浅色文字显示。</div><h2>动画设置数据</h2><button class=explanation-trigger data-target=animationHelp>说明</button><div class=explanation id=animationHelp style=display:none>动画设置允许您开启或关闭页面上的动画效果。这可以帮助提高页面交互的流畅性，或者在您偏好简洁界面时关闭动画。</div><h2>泛光与阴影设置数据</h2><button class=explanation-trigger data-target=glowToggleHelp>说明</button><div class=explanation id=glowToggleHelp style=display:none>泛光与阴影设置允许您开启或关闭页面上的泛光效果。深色模式文字泛光，浅色模式文字出现阴影。</div><h2>更好的代码显示设置数据</h2><button class=explanation-trigger data-target=codeHelp>说明</button><div class=explanation id=codeHelp style=display:none>更好的代码显示设置能为您提供更清晰的代码显示效果，包括更好的代码高亮和代码字体。</div><h2>可见度设置数据</h2><button class=explanation-trigger data-target=visibilityHelp>说明</button><div class=explanation id=visibilityHelp style=display:none>可见度设置允许您调整页面元素的透明度，从而根据您的视觉偏好和环境光线条件优化页面的可读性。</div><h2>字体大小设置数据</h2><button class=explanation-trigger data-target=fontSizeHelp>说明</button><div class=explanation id=fontSizeHelp style=display:none>字体大小设置允许您根据阅读习惯调整页面上字体的大小，提高阅读的舒适度和易读性。</div><h2>护眼模式设置数据</h2><button class=explanation-trigger data-target=eyeCareHelp>说明</button><div class=explanation id=eyeCareHelp style=display:none>护眼模式通过调整屏幕色温和亮度，减少对眼睛的疲劳和伤害，特别是在长时间使用屏幕的情况下。</div><h2>亮度设置数据</h2><button class=explanation-trigger data-target=brightnessHelp>说明</button><div class=explanation id=brightnessHelp style=display:none>亮度设置允许您调整屏幕的亮度，以适应不同的环境光线条件，确保屏幕内容的清晰可见。</div><h2>登录设置</h2><button class=explanation-trigger data-target=loginInfoHelp>说明</button><div class=explanation id=loginInfoHelp style=display:none>登录设置允许您保存登录状态，以便在不同设备间同步您访问高级功能。</div><h2>设置数据</h2><button class=explanation-trigger data-target=allSettingsHelp>说明</button><div class=explanation id=allSettingsHelp style=display:none>清除部分或所有设置将恢复页面到初始状态，初始化所有个性化设置，包括深色模式、动画、字体大小等。</div></div></div><div id=developer style=display:none class=section><h1>开发者选项</h1><h2>用户列表</h2><button class=reloadtable onclick=newtable(1)>刷新用户列表</button>
<img id=preview class=upload-preview style=display:none src=#>
<input type=file id=avatar style=display:none accept=image/png,image/jpeg required onchange=previewImagebebefore(this)><div id=userTableContainer></div><button id=registerButton class=newuser>新建用户</button><br><br><div id=server style=display:none><h2>服务器操作</h2><button class=custom-button style=background-color:red id=restartSystemBtn>重启服务器</button><br><br><div class=terminal-container><div class=terminal-header><div class=terminal-buttons><span class="terminal-button close"></span><span class="terminal-button minimize"></span><span class="terminal-button maximize"></span></div><span class=terminal-title>终端</span></div><div class=terminal-body id=terminalOutput></div></div></div><button class=custom-button onclick=exitdev()>退出开发者模式</button></div><div id=about class=section><h1>关于</h1><div class=intro-box><h1>脚本存放站简介</h1><p>在当今信息技术飞速发展的时代，编程语言和脚本的应用变得越来越广泛。为了满足广大编程爱好者和<a id=developer-link onclick=handleButtonClick()>开发者</a>的需求，我们推出了一个功能丰富、用户友好的脚本存放站。<a href=webdevelopment.html style=color:border-left:unset>这个平台于2023年1月18日13时20分13秒创建的</a>，不仅存放了多种编程语言的脚本，如C++和Python，还提供了丰富的功能和设置选项，旨在为用户提供最佳的使用体验。<h2>多种脚本存放</h2><p>我们的脚本存放站涵盖了多种编程语言的脚本资源。无论你是C++的爱好者，还是Python的忠实粉丝，都可以在这里找到你需要的脚本。平台上存放的脚本种类繁多，从基础数据转换到高级抢票脚本，从进程管理到智能排序系统，应有尽有。每个脚本都附有详细的简介和使用说明，帮助用户快速上手。<h2>动画丰富</h2><p>为了提升用户的视觉体验，我们在平台中加入了丰富的动画效果。这些动画不仅让界面更加生动，还能帮助用户更直观地理解操作流程。例如，在脚本下载和运行过程中，动态的进度条和提示动画可以让用户清晰地了解当前的进度和状态。此外，动画效果还可以在用户切换不同功能模块时提供视觉上的过渡，使整个操作过程更加流畅和自然。<h2>深色模式切换</h2><p>考虑到不同用户的使用习惯和环境，我们特别设计了深色模式切换功能。用户可以根据自己的喜好和使用环境，随时在浅色模式和深色模式之间进行切换。深色模式不仅可以减轻眼睛的疲劳，还能在低光环境下提供更好的可视性。无论是在白天还是夜晚，用户都可以享受到舒适的使用体验。<h2>可见度设置</h2><p>为了满足不同用户的需求，我们提供了多种可见度设置选项。用户可以根据自己的视力情况和使用习惯，调整界面的亮度、对比度和色温等参数。这些设置可以帮助用户在长时间使用平台时，减轻眼睛的疲劳，保护视力。此外，我们还提供了护眼模式，进一步优化了界面的色彩和亮度，确保用户在使用过程中能够享受到最佳的视觉体验。<h2>字体大小设置</h2><p>我们的平台还支持字体大小的自定义设置。用户可以根据自己的需求，调整界面上文字的大小。无论是大字体还是小字体，都可以通过简单的设置来实现。这一功能特别适合那些视力不佳的用户，或者需要在不同设备上使用平台的用户。通过调整字体大小，用户可以更轻松地阅读和操作，提高使用效率。<h2>护眼模式</h2><p>为了保护用户的视力，我们特别设计了护眼模式。开启护眼模式后，界面的色彩和亮度会自动调整到最适合眼睛的状态。护眼模式不仅可以减轻眼睛的疲劳，还能在长时间使用平台时，提供更舒适的视觉体验。无论是在白天还是夜晚，用户都可以通过护眼模式，享受到更加健康的使用体验。<h2>开关动画</h2><p>虽然动画效果可以提升用户的视觉体验，但我们也考虑到有些用户可能更喜欢简洁的界面。因此，我们提供了开关动画的选项。用户可以根据自己的喜好，随时开启或关闭动画效果。无论是喜欢动态效果的用户，还是喜欢简洁界面的用户，都可以通过这一功能，定制自己的使用体验。<h2>登录账户享受更多功能</h2><p>为了提供更个性化的服务，我们支持用户登录账户。登录后，用户可以享受到更多的功能和服务。例如，用户可以保存自己的设置，方便在不同设备上同步使用；还可以访问更多的高级脚本和资源，提升自己的编程技能。此外，登录账户还可以参与平台的社区互动，与其他用户交流经验和心得，分享自己的作品和创意。<h2>支持下载源代码</h2><p>我们的平台还支持下载源代码。用户可以根据自己的需求，下载所需的脚本源代码，进行二次开发和修改。这一功能不仅方便了用户的学习和研究，还为用户提供了更多的创作空间。通过下载源代码，用户可以深入了解脚本的实现原理，提升自己的编程水平。<h2>总结</h2><p>我们的脚本存放站致力于为用户提供丰富的脚本资源和优质的使用体验。无论你是初学者还是资深开发者，都可以在这里找到适合自己的脚本和工具。通过多种功能和设置选项，我们希望能够满足不同用户的需求，帮助他们更高效地完成工作和学习。欢迎大家登录我们的平台，体验更多精彩内容！</p>——脚本存放站</div><br>© 制作人：<a href=https://github.com/wycwycwycwyc target=_blank>wyc</a>，保留所有权利。</div><script>if(navigator.userAgent.match(/Mobile/i)){document.getElementById('developer').style.display='none';var menu;document.getElementById('sidebar').style.width='100%';document.getElementById("content").style.visibility='hidden';document.getElementById("content").style.marginLeft='0';var sidebars=document.getElementById('sidebar');for(var i=0;i<sidebars.children.length;i++){var childId=sidebars.children[i].id;var button=document.createElement('button');button.innerHTML='返回';button.id='last';button.className='custom-button';button.style.cssText='position: fixed;left :0;top:-40px';var urlParams=new URLSearchParams(window.location.search);var container=document.getElementById(childId.replace(/-si/g,'').replace(/developers/g,'developer'));button.onclick=function(){document.getElementById(menu).style.display='none';var type=urlParams.get('type');if(type==null){sidebars.classList.remove('hide');document.getElementById('sidebar').style.display='block';}}
if(childId!=''){container.appendChild(button);document.getElementById(childId.replace(/-si/g,'').replace(/developers/g,'developer')).style.transform='translateY(30px)';document.getElementById(childId.replace(/-si/g,'').replace(/developers/g,'developer')).style.display='none';}}
if(sidebars){var children=sidebar.children;sidebar.addEventListener('click',function(event){if(event.target.id){var clickedId=event.target.id;event.preventDefault();menu=clickedId.replace(/-si/g,'').replace(/developers/g,'developer');sidebars.classList.add('hide');sidebars.addEventListener('transitionend',function handler(){sidebars.removeEventListener('transitionend',handler);},{once:true});var contentElement=document.getElementById('content');var animationStyle={animationName:'slideInFromRight',animationDuration:'0.5s',animationTimingFunction:'ease-out',animationFillMode:'forwards',};Object.assign(contentElement.style,animationStyle);document.getElementById(clickedId.replace(/-si/g,'').replace(/developers/g,'developer')).style.display='block';document.getElementById(clickedId.replace(/-si/g,'').replace(/developers/g,'developer')).style.visibility='visible';}});}
var urlParams=new URLSearchParams(window.location.search);var type=urlParams.get('type');if(type!=null){document.getElementById('last').display='none';sidebars.style.display='none';document.getElementById(type).style.visibility='visible';document.getElementById(type).style.display='block';}}
var usertabletext;document.addEventListener('DOMContentLoaded',function(){var darkModeToggle=document.getElementById('darkModeToggle');var animationToggle=document.getElementById('animationToggle');var lightModeBgUrlInput=document.getElementById('lightModeBgUrl');var darkModeBgUrlInput=document.getElementById('darkModeBgUrl');var isDarkMode=localStorage.getItem('darkMode')==='enabled';var isAnimationEnabled=localStorage.getItem('animation')==='enabled';var lightModeBgUrl=localStorage.getItem('lightModeBgUrl')||'';var darkModeBgUrl=localStorage.getItem('darkModeBgUrl')||'';darkModeToggle.checked=isDarkMode;animationToggle.checked=isAnimationEnabled;lightModeBgUrlInput.value=localStorage.getItem('lightModeBgUrl1');darkModeBgUrlInput.value=localStorage.getItem('darkModeBgUrl1');document.body.classList.toggle('dark-mode',isDarkMode);document.body.classList.toggle('no-animation',!isAnimationEnabled);darkModeToggle.addEventListener('change',function(){isDarkMode=darkModeToggle.checked;localStorage.setItem('darkMode',isDarkMode?'enabled':'disabled');if(true){localStorage.setItem('backgroundImage',"url('"+lightModeBgUrlInput.value+"')");localStorage.setItem('lightModeBgUrl1',lightModeBgUrlInput.value);localStorage.setItem('lightModeBgUrl',"url('"+lightModeBgUrlInput.value+"')");localStorage.setItem('backgroundImage',"url('"+darkModeBgUrlInput.value+"')");localStorage.setItem('darkModeBgUrl1',darkModeBgUrlInput.value);localStorage.setItem('darkModeBgUrl',"url('"+darkModeBgUrlInput.value+"')")}
document.body.classList.toggle('dark-mode',isDarkMode);});var isDarkModeimg=document.getElementById('isDarkModeimg');isDarkModeimg.addEventListener('click',function isDarkModeimg(){isDarkMode=darkModeToggle.checked;localStorage.setItem('darkMode',isDarkMode?'enabled':'disabled');if(lightModeBgUrlInput.value==''||darkModeBgUrlInput.value==''){lightModeBgUrlInput.value='https://pic.vjshi.com/2021-12-30/35b7a7a382df4ef387873d042575802a/00001.jpg?x-oss-process=style/watermark';localStorage.setItem('backgroundImage',"url('https://pic.vjshi.com/2021-12-30/35b7a7a382df4ef387873d042575802a/00001.jpg?x-oss-process=style/watermark')");localStorage.setItem('lightModeBgUrl1',"https://pic.vjshi.com/2021-12-30/35b7a7a382df4ef387873d042575802a/00001.jpg?x-oss-process=style/watermark");localStorage.setItem('lightModeBgUrl',"url('https://pic.vjshi.com/2021-12-30/35b7a7a382df4ef387873d042575802a/00001.jpg?x-oss-process=style/watermark')");darkModeBgUrlInput.value='https://img1.wallspic.com/previews/7/4/9/3947/3947-ye_wan_de_tian_kong-wai_ceng_kong_jian-ming_xing-tian_wen_xue_dui_xiang-tian_kong-x750.jpg';localStorage.setItem('backgroundImage',"url('https://img1.wallspic.com/previews/7/4/9/3947/3947-ye_wan_de_tian_kong-wai_ceng_kong_jian-ming_xing-tian_wen_xue_dui_xiang-tian_kong-x750.jpg')");localStorage.setItem('darkModeBgUrl1',"https://img1.wallspic.com/previews/7/4/9/3947/3947-ye_wan_de_tian_kong-wai_ceng_kong_jian-ming_xing-tian_wen_xue_dui_xiang-tian_kong-x750.jpg");}
else{if(true){localStorage.setItem('backgroundImage',"url('"+lightModeBgUrlInput.value+"')");localStorage.setItem('lightModeBgUrl1',lightModeBgUrlInput.value);localStorage.setItem('lightModeBgUrl',"url('"+lightModeBgUrlInput.value+"')");localStorage.setItem('backgroundImage',"url('"+darkModeBgUrlInput.value+"')");localStorage.setItem('darkModeBgUrl1',darkModeBgUrlInput.value);localStorage.setItem('darkModeBgUrl',"url('"+darkModeBgUrlInput.value+"')")}}
Qmsg.success("应用成功！");})
animationToggle.addEventListener('change',function(){isAnimationEnabled=animationToggle.checked;localStorage.setItem('animation',isAnimationEnabled?'enabled':'disabled');document.body.classList.toggle('no-animation',!isAnimationEnabled);});const savedOpacity=localStorage.getItem('opacity');const defaultOpacity=savedOpacity!==null?savedOpacity:0.3;const opacityRange=document.getElementById('opacityRange');const opacityNumber=document.getElementById('opacityNumber');opacityRange.value=defaultOpacity*100;opacityNumber.value=defaultOpacity*100;opacityRange.addEventListener('input',function(){const opacity=opacityRange.value;opacityNumber.value=opacity;localStorage.setItem('opacity',opacity/100);});opacityNumber.addEventListener('input',function(){let opacity=opacityNumber.value;if(opacity.length>3){opacity=opacity.slice(0,3);}
if(opacity<0)opacity=0;if(opacity>100)opacity=100;if(opacity.length>1&&opacity.startsWith('0')){opacity=opacity.slice(1);}
opacityNumber.value=opacity;opacityRange.value=opacity;localStorage.setItem('opacity',opacity/100);});const savedblur=localStorage.getItem('blur');const defaultblur=savedblur!==null?savedblur:30
const blurRange=document.getElementById('blurRange');const blurNumber=document.getElementById('blurNumber');blurRange.value=defaultblur;blurNumber.value=defaultblur;blurRange.addEventListener('input',function(){const blur=blurRange.value;blurNumber.value=blur;localStorage.setItem('blur',blur);});blurNumber.addEventListener('input',function(){let blur=blurNumber.value;if(blur.length>2){blur=blur.slice(0,2);}
if(blur<0)blur=0;if(blur>50)blur=50;if(blur.length>1&&blur.startsWith('0')){blur=blur.slice(1);}
blurNumber.value=blur;blurRange.value=blur;localStorage.setItem('blur',opacity);});const username=localStorage.getItem('username');const usernameElement=document.getElementById('username');const loginButton=document.getElementById('loginButton');const logoutButton=document.getElementById('logoutButton');const sa=document.getElementById('sa');const isLoggedIn=localStorage.getItem('isLoggedIn')==='true';const logout=document.getElementById('logout');const resetPasswordLink=document.createElement('a');const loginStatus=document.createElement('loginStatus');const email=document.getElementById('email');if(isLoggedIn){usernameElement.innerHTML='用户名: <a href="UpdateUsername.html" class="user-name-text"><span>'+'正在加载'+'</span></a>';email.innerHTML='用户名: <a href="UpdateUsername.html" class="user-name-text"><span>'+'正在加载'+'</span></a>';let userId=localStorage.getItem('userid');const imageUrl=`https://jbcfz.serveo.net/get-icon-by-id?id=${localStorage.getItem('userid')}`;document.getElementById('loginStatus').style.backgroundImage=`url('${imageUrl}')`;fetch('https://jbcfz.serveo.net/get-username-by-id',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:userId})}).then(response=>{if(!response.ok){throw new Error('Network response was not ok');}
return response.json();}).then(data=>{if(data.success){console.log('用户名:',data.data.username);localStorage.setItem('username',data.data.username);usernameElement.innerHTML='用户名: <a href="UpdateUsername.html" class="user-name-text"><span>'+username+'</span></a>';}else{console.error(data.message);swal({title:"找不到该用户，是否尝试重新登录？",text:"注意：如果页面未加载完成时进行操作请忽略，等待页面加载完成即可",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"是",cancelButtonText:"否",closeOnConfirm:false,closeOnCancel:false},function(isConfirm){if(isConfirm){swal("正在跳转!","正在跳转");localStorage.removeItem('isLoggedIn');localStorage.removeItem('username');localStorage.removeItem('usertype');localStorage.removeItem('userid');localStorage.removeItem('developerOptionsEnabled');window.location.href='Login.html?redirect=settings.html';}else{window.location.reload();}})}}).catch(error=>{console.error('Fetch error:',error);swal({title:"找不到该用户，是否尝试重新登录？",text:"注意：如果页面未加载完成时进行操作请忽略，等待页面加载完成即可",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"是",cancelButtonText:"否",closeOnConfirm:false,closeOnCancel:false},function(isConfirm){if(isConfirm){swal("正在跳转!","正在跳转");localStorage.removeItem('isLoggedIn');localStorage.removeItem('username');localStorage.removeItem('usertype');localStorage.removeItem('userid');localStorage.removeItem('developerOptionsEnabled');window.location.href='Login.html?redirect=settings.html';}else{window.location.reload();}})});fetch('https://jbcfz.serveo.net/get-email-by-userid',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({userId:localStorage.getItem('userid')})}).then(response=>response.json()).then(data=>{if(data.success){email.innerHTML='邮箱: <a href="UpdateEmail.html" class="user-name-text"><span>'+data.data.email+'</span></a>';}}).catch(error=>{});usernameElement.style.display='block';const resetPasswordLink=document.createElement('a');resetPasswordLink.href='resetpassword.html';resetPasswordLink.textContent='更改密码';resetPasswordLink.className='password-link';passwordLink.appendChild(resetPasswordLink);passwordLink.style.display='block';}else{document.getElementById('account').style.height='100px';usernameElement.style.display='none';passwordLink.style.display='none';resetPasswordLink.style.display='none';sa.style.display='none';logout.style.display='none';document.getElementById('loginStatus').remove();document.getElementById('email').remove();}
if(isLoggedIn){logoutButton.style.display='block';loginButton.style.display='none';logoutButton.onclick=function(){swal({title:"您确定要退出登录吗？",text:"这将清除你本地的登录信息",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"是",cancelButtonText:"否",closeOnConfirm:false,closeOnCancel:false},function(isConfirm){if(isConfirm){localStorage.removeItem('isLoggedIn');localStorage.removeItem('username');localStorage.removeItem('usertype');localStorage.removeItem('userid');localStorage.removeItem('developerOptionsEnabled');swal("退出成功成功！","已退出登录","success");location.reload();}
else{swal({title:"正在取消",text:"正在取消",timer:0,showConfirmButton:false})}})};}else{usernameElement.style.display='none';passwordLink.style.display='none';logoutButton.style.display='none';sa.style.display='none';logout.style.display='none';loginButton.onclick=function(){var loginUrl='Login.html?redirect=settings.html#account';openPage(loginUrl);};}});function clearDarkMode(){swal({title:"确定要清除深色模式设置吗？",text:"确定要清除深色模式设置吗？",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"是",cancelButtonText:"否",closeOnConfirm:false,closeOnCancel:false},function(isConfirm){if(isConfirm){localStorage.removeItem('darkMode');localStorage.removeItem('backgroundImage');swal("清除成功！","深色模式设置已清除","success");location.reload();}
else{swal({title:"正在取消",text:"正在取消",timer:0,showConfirmButton:false})}})}
function clearAnimation(){swal({title:"确定要清除动画设置吗？",text:"确定要清除动画设置吗？",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"是",cancelButtonText:"否",closeOnConfirm:false,closeOnCancel:false},function(isConfirm){if(isConfirm){localStorage.removeItem('animation');swal("清除成功！","动画设置已清除","success");location.reload();}
else{swal({title:"正在取消",text:"正在取消",timer:0,showConfirmButton:false})}})}
function clearglowToggle(){swal({title:"确定要清除泛光设置吗？",text:"确定要清除泛光设置吗？",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"是",cancelButtonText:"否",closeOnConfirm:false,closeOnCancel:false},function(isConfirm){if(isConfirm){localStorage.removeItem('glowEnabled');swal("清除成功！","泛光设置已清除","success");location.reload();}
else{swal({title:"正在取消",text:"正在取消",timer:0,showConfirmButton:false})}})}
function clearcode(){swal({title:"确定要清除更好的代码显示设置吗？",text:"确定要清除更好的代码显示设置吗？",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"是",cancelButtonText:"否",closeOnConfirm:false,closeOnCancel:false},function(isConfirm){if(isConfirm){localStorage.removeItem('isCodeVisible');swal("清除成功！","更好的代码显示设置已清除","success");location.reload();}
else{swal({title:"正在取消",text:"正在取消",timer:0,showConfirmButton:false})}})}
function clearVisibility(){swal({title:"确定要清除可见度设置吗？",text:"确定要清除可见度设置吗？",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"是",cancelButtonText:"否",closeOnConfirm:false,closeOnCancel:false},function(isConfirm){if(isConfirm){localStorage.removeItem('opacity');swal("清除成功！","可见度设置已清除","success");location.reload();}
else{swal({title:"正在取消",text:"正在取消",timer:0,showConfirmButton:false})}})}
function clearFontSize(){swal({title:"确定要清除字体大小设置吗？",text:"确定要清除字体大小设置吗？",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"是",cancelButtonText:"否",closeOnConfirm:false,closeOnCancel:false},function(isConfirm){if(isConfirm){localStorage.removeItem('fontSize');swal("清除成功！","字体大小设置已清除","success");location.reload();}
else{swal({title:"正在取消",text:"正在取消",timer:0,showConfirmButton:false})}})}
function clearEyeCare(){swal({title:"确定要清除护眼模式设置吗？",text:"确定要清除护眼模式设置吗？",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"是",cancelButtonText:"否",closeOnConfirm:false,closeOnCancel:false},function(isConfirm){if(isConfirm){localStorage.removeItem('eyeCareMode');swal("清除成功！","护眼模式设置已清除","success");location.reload();}
else{swal({title:"正在取消",text:"正在取消",timer:0,showConfirmButton:false})}})}
function clearBrightness(){swal({title:"确定要清除亮度设置吗？",text:"确定要清除亮度设置吗？",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"是",cancelButtonText:"否",closeOnConfirm:false,closeOnCancel:false},function(isConfirm){if(isConfirm){localStorage.removeItem('brightness');swal("清除成功！","亮度设置已清除","success");location.reload();}
else{swal({title:"正在取消",text:"正在取消",timer:0,showConfirmButton:false})}})}
function clearLoginInfo(){swal({title:"确定要清除登录信息吗？",text:"确定要清除登录信息吗？",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"是",cancelButtonText:"否",closeOnConfirm:false,closeOnCancel:false},function(isConfirm){if(isConfirm){localStorage.removeItem('isLoggedIn');localStorage.removeItem('username');localStorage.removeItem('usertype');localStorage.removeItem('userid');localStorage.removeItem('developerOptionsEnabled');swal("清除成功！","登录信息已清除","success");location.reload();}
else{swal({title:"正在取消",text:"正在取消",timer:0,showConfirmButton:false})}})}
function clearAllSettings(){swal({title:"确定要清除所有设置吗？",text:"确定要清除所有设置吗？",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"是",cancelButtonText:"否",closeOnConfirm:false,closeOnCancel:false},function(isConfirm){if(isConfirm){localStorage.clear();swal("清除成功！","所有设置已清除","success");location.reload();}
else{swal({title:"正在取消",text:"正在取消",timer:0,showConfirmButton:false})}})}
document.addEventListener('DOMContentLoaded',function(){});function logout(){swal({title:"确定要注销此用户吗？",text:"这将永久删除此用户在服务器和本地的所有记录。",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"是",cancelButtonText:"否",closeOnConfirm:false,closeOnCancel:false},function(isConfirm){if(isConfirm){userId=localStorage.getItem('userid');fetch('https://jbcfz.serveo.net/delete-user',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:userId})}).then(response=>{if(!response.ok){throw new Error('Network response was not ok');}
return response.json();}).then(data=>{if(data.success){localStorage.removeItem('username');localStorage.removeItem('usertype');localStorage.removeItem('userid');localStorage.removeItem('developerOptionsEnabled');newtable();swal("用户删除成功","此用户将不能登录","success");}else{swal("用户删除失败",data.message,"error");}}).catch(error=>{console.error('Error:',error);swal("用户删除失败","删除用户时发生错误，请稍后重试。","error");});}else{swal({title:"正在取消",text:"正在取消",timer:0,showConfirmButton:false})}})}
function openPage(url){window.location.href=url;}
document.addEventListener('DOMContentLoaded',function(){var triggers=document.querySelectorAll('.explanation-trigger');triggers.forEach(function(trigger){trigger.addEventListener('click',function(){var explanationId=this.getAttribute('data-target');var explanation=document.getElementById(explanationId);explanation.style.display=explanation.style.display==='block'?'none':'block';});});});function sa(){swal({title:"您确定要切换账号吗",text:"这将清除你现在的登录信息",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"是",cancelButtonText:"否",closeOnConfirm:false,closeOnCancel:false},function(isConfirm){if(isConfirm){localStorage.removeItem('isLoggedIn');localStorage.removeItem('username');localStorage.removeItem('usertype');localStorage.removeItem('userid');localStorage.removeItem('developerOptionsEnabled');window.location.href='Login.html?redirect=settings.html#account';}
else{swal({title:"正在取消",text:"正在取消",timer:0,showConfirmButton:false})}})}
function exitdev(){swal({title:"您确定要退出开发者模式吗",text:"这将关闭你的开发者操作",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"是",cancelButtonText:"否",closeOnConfirm:false,closeOnCancel:false},function(isConfirm){if(isConfirm){localStorage.removeItem('developerOptionsEnabled');swal("退出成功！","您已退出开发者模式","success");if(navigator.userAgent.match(/Mobile/i)){document.getElementById('sidebar').style.display='block';}
document.getElementById('developer-link').style.pointerEvents='none';document.getElementById('developers').style.display='none';document.getElementById('developer').style.display='none';}
else{swal({title:"正在取消",text:"正在取消",timer:0,showConfirmButton:false})}})}
let clickCount=0;const isLoggedIn=localStorage.getItem('isLoggedIn')==='true';function checkDeveloperOptions(){const developerLink=document.getElementById('developer-link');if(localStorage.getItem('developerOptionsEnabled')==='true'&&isLoggedIn&&(localStorage.getItem('usertype')==='superadmin'||localStorage.getItem('usertype')==='admin')){document.getElementById('developers').style.display='block';if(!navigator.userAgent.match(/Mobile/i)){document.getElementById('developer').style.display='block';}
developerLink.style.pointerEvents='none';}}
function handleButtonClick(){clickCount++;if(clickCount===10&&isLoggedIn&&(localStorage.getItem('usertype')==='superadmin'||localStorage.getItem('usertype')==='admin')){clickCount=0;localStorage.setItem('developerOptionsEnabled','true');const developerLink=document.getElementById('developer-link');developerLink.removeEventListener('click',handleButtonClick);developerLink.style.pointerEvents='none';document.getElementById('developers').style.display='block';if(!navigator.userAgent.match(/Mobile/i)){document.getElementById('developer').style.display='block';}
newtable();Qmsg.success("已启用开发者模式");}}
document.addEventListener('DOMContentLoaded',(event)=>{const developerLink=document.getElementById('developer-link');if(localStorage.getItem('developerOptionsEnabled')==='true'&&(localStorage.getItem('usertype')==='superadmin'||localStorage.getItem('usertype')==='admin')){developerLink.addEventListener('click',handleButtonClick);}
checkDeveloperOptions();});document.addEventListener('DOMContentLoaded',function(){var userType;let userId=localStorage.getItem('userid');if(isLoggedIn){fetch('https://jbcfz.serveo.net/get-username-by-id',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:userId})}).then(response=>{if(!response.ok){throw new Error('Network response was not ok');}
return response.json();}).then(data=>{if(data.success){console.log('用户名:',data.data.username);localStorage.setItem('username',data.data.username);username=localStorage.getItem('username');const userData={username:username};fetch('https://jbcfz.serveo.net/get-user-type',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(userData)}).then(response=>{if(!response.ok){throw new Error('网络响应错误');}
return response.json();}).then(data=>{if(data.success){usertype=data.data.userType;localStorage.setItem('usertype',usertype)}}).catch(error=>{console.error('获取用户类型失败:',error);swal("获取用户类型失败，请稍后重试。","获取用户类型失败，请稍后重试。","error");});}else{console.error(data.message);swal({title:"找不到该用户，是否尝试重新登录？",text:"注意：如果页面未加载完成时进行操作请忽略，等待页面加载完成即可",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"是",cancelButtonText:"否",closeOnConfirm:false,closeOnCancel:false},function(isConfirm){if(isConfirm){swal("正在跳转!","正在跳转");localStorage.removeItem('isLoggedIn');localStorage.removeItem('username');localStorage.removeItem('usertype');localStorage.removeItem('userid');localStorage.removeItem('developerOptionsEnabled');window.location.href='Login.html?redirect=settings.html';}else{window.location.reload();}})}}).catch(error=>{console.error('Fetch error:',error);swal({title:"找不到该用户，是否尝试重新登录？",text:"注意：如果页面未加载完成时进行操作请忽略，等待页面加载完成即可",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"是",cancelButtonText:"否",closeOnConfirm:false,closeOnCancel:false},function(isConfirm){if(isConfirm){swal("正在跳转!","正在跳转");localStorage.removeItem('isLoggedIn');localStorage.removeItem('username');localStorage.removeItem('usertype');localStorage.removeItem('userid');localStorage.removeItem('developerOptionsEnabled');window.location.href='Login.html?redirect=settings.html';}else{window.location.reload();}})});}
if(localStorage.getItem('developerOptionsEnabled')==='true'&&isLoggedIn&&(localStorage.getItem('usertype')==='superadmin'||localStorage.getItem('usertype')==='admin')){fetch(`https://jbcfz.serveo.net/users?userid=${localStorage.getItem('userid')}`).then(response=>{if(response.status===403){}
return response.json();}).then(data=>{if(data&&data.success){var userTableContainer=document.getElementById('userTableContainer');userTableContainer.innerHTML='';createTable(data.data);}}).catch(error=>{console.error('请求失败:',error);showError('系统繁忙，请稍后再试');});}});function newtable(isnewtable){if(isnewtable===1){loading=Qmsg.loading("正在重新加载用户列表");}
fetch(`https://jbcfz.serveo.net/users?userid=${localStorage.getItem('userid')}`).then(response=>{if(response.status===403){}
return response.json();}).then(data=>{if(data&&data.success){var userTableContainer=document.getElementById('userTableContainer');userTableContainer.innerHTML='';createTable(data.data);loading.close();Qmsg.success("用户列表加载成功");}}).catch(error=>{console.error('请求失败:',error);showError('系统繁忙，请稍后再试');});}
function createTable(users,isicon,input){localStorage.setItem('users',users);const container=document.getElementById('userTableContainer');const table=document.createElement('table');const thead=createTableHead();table.appendChild(thead);const tbody=document.createElement('tbody');users.forEach((user,index)=>{if(isicon===1){createRow(user,index,users,1,input);return;}
const row=createRow(user,index,users);tbody.appendChild(row);});table.appendChild(tbody);container.appendChild(table);}
function createTableHead(){const thead=document.createElement('thead');const headerRow=document.createElement('tr');['头像','用户名','邮箱','密码','用户类型','用户ID(不可更改)','操作','切换'].forEach((text,i)=>{const th=document.createElement('th');th.textContent=text;if(i===0){th.style.borderRadius='10px 0 0 0';}if(i===7){th.style.borderRadius='0 10px 0 0';}
headerRow.appendChild(th);});thead.appendChild(headerRow);return thead;}
function createRow(user,index,users,isicon,input){var userbefore=user;if(isicon===1){previewImagebefore(input,userbefore);return;}
const tr=document.createElement('tr');const imageUrl=`https://jbcfz.serveo.net/get-icon-by-id?id=${user.id}`;const buttonTd=document.createElement('td');const circleButton=document.createElement('button');circleButton.style.width='50px';circleButton.style.height='50px';circleButton.style.borderRadius='50%';circleButton.style.backgroundColor='#3498db';circleButton.style.display='flex';circleButton.style.justifyContent='center';circleButton.style.alignItems='center';circleButton.style.cursor='none';circleButton.style.fontSize='16px';circleButton.style.border='none';circleButton.style.outline='none';circleButton.style.boxShadow='0 2px 4px rgba(0, 0, 0, 0.2)';circleButton.style.backgroundSize='cover';circleButton.style.backgroundRepeat='no-repeat;'
circleButton.style.backgroundImage=`url(${imageUrl})`;buttonTd.appendChild(circleButton);tr.appendChild(buttonTd);const isCurrentUserAdmin=localStorage.getItem('usertype')==='admin'||localStorage.getItem('usertype')==='user';let isSuperAdmin=user.type==='superadmin';let isAndmin=user.type==='admin';Object.values(user).forEach((text,i)=>{const td=document.createElement('td');if(isCurrentUserAdmin&&(isSuperAdmin||isAndmin)&&i!==0&&localStorage.getItem('username')!==user.username){td.textContent=i===0||i===3?text:'错误:拒绝访问';td.style.color=i===0||i===3?null:'red';td.style.pointerEvents='none';}else{td.textContent=text;}
tr.appendChild(td);});const switchUserIdTd=document.createElement('td');const switchUserIdButton=document.createElement('button');switchUserIdButton.textContent='切换';switchUserIdButton.style.width='auto';switchUserIdButton.className='custom-button';switchUserIdButton.onclick=function(){storeUserId(index,users,user);};switchUserIdTd.appendChild(switchUserIdButton);const editTd=document.createElement('td');const editButton=document.createElement('button');if(isCurrentUserAdmin&&(isSuperAdmin||isAndmin)&&localStorage.getItem('username')!==user.username){editButton.disabled=true;editButton.textContent='不可编辑';}else{editButton.textContent='编辑';editButton.style.width='auto';editButton.className='custom-button';editButton.setAttribute('id',`editButton-${user.username}`);editButton.onclick=(function(idx){return function(){editUser(idx,users);};})(index);}
editTd.appendChild(editButton);const customLink=document.createElement('a');customLink.textContent='×';customLink.display='inline';customLink.style.color='red';customLink.style.fontSize='30px';customLink.style.marginLeft='10px';customLink.style.textDecoration='none';if(isCurrentUserAdmin&&(isSuperAdmin||isAndmin)&&localStorage.getItem('username')!==user.username){customLink.style.color='grey';customLink.onclick=function(event){event.preventDefault();swal("错误:拒绝访问","错误:拒绝访问","error");};}else{customLink.className='custom-link';const currentType=localStorage.getItem('usertype');const newType=user.type;customLink.onclick=function(){swal({title:"确定要删除该用户吗？",text:"这个用户将无法登录",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"是",cancelButtonText:"否",closeOnConfirm:false,closeOnCancel:false},function(isConfirm){if(isConfirm){swal('正在删除');userId=user.id;fetch('https://jbcfz.serveo.net/delete-user',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:userId,currentType:currentType,newType:newType})}).then(response=>{if(!response.ok){throw new Error('Network response was not ok');}
return response.json();}).then(data=>{if(data.success){newtable();swal("用户删除成功","此用户将不能登录","success");}else{swal("用户删除失败:",data.message,"error");}}).catch(error=>{console.error('Error:',error);swal("删除用户时发生错误，请稍后重试。","删除用户时发生错误，请稍后重试。","error");});}
else{swal({title:"正在取消",text:"正在取消",timer:0,showConfirmButton:false})}})};}
editTd.appendChild(customLink);tr.appendChild(editTd);tr.appendChild(switchUserIdTd);return tr;return;}
function previewImagebebefore(input){fetch(`https://jbcfz.serveo.net/users${localStorage.getItem('userId')}`).then(response=>{if(response.ok){return response.json();}
throw new Error('Network response was not ok.');}).then(data=>{document.getElementById('userTableContainer').innerHTML='';createTable(data.data,1,input)}).catch(error=>{console.error('There has been a problem with your fetch operation:',error);});return;}
function previewImagebefore(input,user){previewImage(input,user);return;}
function previewImage(input,user){if(input.files&&input.files[0]){var reader=new FileReader();reader.onload=function(e){var img=new Image();img.onload=function(){var canvas=document.createElement('canvas');var ctx=canvas.getContext('2d');var aspectRatio=img.width/img.height;var targetWidth,targetHeight;if(aspectRatio>1){targetWidth=200;targetHeight=200;}else if(aspectRatio<1){targetHeight=200;targetWidth=200;}else{targetWidth=200;targetHeight=200;}
canvas.width=200;canvas.height=200;ctx.drawImage(img,(200-targetWidth)/2,(200-targetHeight)/2,targetWidth,targetHeight);var preview=document.getElementById('preview');preview.src=canvas.toDataURL('image/png');preview.style.display='inline';};img.src=e.target.result;};reader.readAsDataURL(input.files[0]);function sleep(ms){return new Promise(resolve=>setTimeout(resolve,ms));}
sleep(1000).then(()=>{uploadImage(user);});}
return;}
function uploadImage(user){var userId=user.id;var preview=document.getElementById('preview');if(!preview.src){Qmsg.error('请先选择文件');return;}
fetch(preview.src).then(res=>res.blob()).then(blob=>{if(!['image/jpeg','image/png'].includes(blob.type)){Qmsg.error('只能上传不超过1MB的图片,格式为png或jpg');return;}
var formData=new FormData();formData.append('userId',userId);formData.append('avatar',blob);var xhr=new XMLHttpRequest();xhr.open('POST','https://jbcfz.serveo.net/upload-image',true);xhr.upload.onprogress=function(event){if(event.lengthComputable){}};xhr.onload=function(){if(xhr.status===200){swal('图片上传成功','你的账号头像已更新','success');newtable();}else{swal('图片上传失败: ',xhr.statusText,'error');}};xhr.send(formData);}).catch(error=>{console.error('Error converting image to blob',error);Qmsg.error('无法转换图片');});return;}
function storeUserId(index,users,currentUser){const currentUserType=localStorage.getItem('usertype');const targetUserId=users[index].id;const targetUserType=users[index].type;const username=users[index].username;swal({title:"确定切换到"+username+"吗？",text:"可能会导致一些不可预测的问题",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"是",cancelButtonText:"否",closeOnConfirm:false,closeOnCancel:false},function(isConfirm){if(isConfirm){if(currentUserType==='superadmin'){localStorage.setItem('userid',targetUserId);localStorage.setItem('username',username);localStorage.setItem('usertype',targetUserType);newtable();swal("用户已更新","当前用户已更新为: "+username,"success");location.reload();}
else if(currentUserType==='admin'){if(targetUserType==='superadmin'||targetUserType==='admin'&&localStorage.getItem('username')!==username){confirmPassword(targetUserId,username,targetUserType);}else{localStorage.setItem('userid',targetUserId);localStorage.setItem('username',username);localStorage.setItem('usertype',targetUserType);newtable();swal("用户已更新","当前用户已更新为: "+username,"success");}}else if(currentUserType==='user'){if(targetUserType==='superadmin'||targetUserType==='admin'){confirmPassword(targetUserI,username,targetUserType);}else{localStorage.setItem('userid',targetUserId);localStorage.setItem('username',username);localStorage.setItem('usertype',targetUserType);newtable();swal("用户已更新","当前用户已更新为: "+username,"success");}}
else{swal("权限不足","您没有权限执行此操作","error");}}
else{swal({title:"正在取消",text:"正在取消",timer:0,showConfirmButton:false})}})}
function confirmPassword(targetUserId,username,targetUserType){swal({title:"输入"+username+"的密码以继续",text:"请输入"+username+"的密码:",type:"input",showCancelButton:true,closeOnConfirm:false,animation:"slide-from-top",inputPlaceholder:"请输入密码"},function(inputValue){if(!inputValue){swal.showInputError("密码不能为空");return false;}
swal('正在验证');fetch('https://jbcfz.serveo.net/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:username,password:inputValue})}).then(response=>{return response.text();}).then(data=>{if(data.includes('<h1>登录成功</h1>')){localStorage.setItem('userid',targetUserId);localStorage.setItem('username',username);localStorage.setItem('usertype',targetUserType);newtable();swal("密码正确，用户已更新","当前用户已更新为: "+username,"success");location.reload();}else if(data.includes('登录失败')){swal("密码错误",'请输入正确的密码','error');}}).catch(error=>{alert(error);swal("请求失败","请稍后重试","error");});});}
function editUser(index,users){const user=users[index];const isCurrentUserAdmin=localStorage.getItem('usertype')==='admin';const isSuperAdmin=user.type==='superadmin';const tbody=document.querySelector('tbody');const row=tbody.children[index];const cells=row.querySelectorAll('td');const isAndmin=user.type==='admin';cells.forEach((cell,i)=>{if(i<cells.length-2&&i!==0){if(isCurrentUserAdmin&&(isSuperAdmin||isAndmin)&&i!==0&&i!==3&&localStorage.getItem('username')!==user.username){cell.innerHTML='';cell.style.pointerEvents='none';}else{const input=document.createElement('input');input.type='text';input.value=cell.textContent;input.className='input_info';cell.innerHTML='';cell.appendChild(input);if(i===4){input.addEventListener('input',function(){let value=this.value.toLowerCase();const validChars=[...value].filter(char=>char==='u'||char==='a');const lastChar=validChars[validChars.length-1];if(lastChar==='u'){this.value='user';}else if(lastChar==='a'){this.value='admin';}else{this.value='';}});input.select();}
if(i===5){input.style.pointerEvents='none';}}}});const editButton=document.getElementById(`editButton-${user.username}`);editButton.className='custom-button';editButton.style.width='auto';if(isCurrentUserAdmin&&(isSuperAdmin||isAndmin)&&localStorage.getItem('username')!==user.username){editButton.disabled=true;editButton.textContent='不可编辑';}else{editButton.textContent='提交';editButton.onclick=function(){swal({title:"确定要更改此用户信息吗",text:"确定要更改此用户信息吗",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"是",cancelButtonText:"否",closeOnConfirm:false,closeOnCancel:false},function(isConfirm){if(isConfirm){swal('正在更新');submitChanges(index,users);}
else{swal({title:"正在取消",text:"正在取消",timer:0,showConfirmButton:false})}})};}}
function submitChanges(index,users){const tbody=document.querySelector('tbody');const row=tbody.children[index];const inputs=row.querySelectorAll('input');const updatedUserInfo={};const user=users[index];inputs.forEach((input,i)=>{const key=Object.keys(users[index])[i];const value=input.value.trim();if(value){updatedUserInfo[key]=value;}});const currentType=localStorage.getItem('usertype');const newType=user.type;updatedUserInfo['currentType']=currentType;updatedUserInfo['newType']=newType;if(Object.values(updatedUserInfo).some(value=>value===null)){swal("更新失败：请确保所有字段都已填写。","更新失败：请确保所有字段都已填写。","error");return;}
const userData=JSON.stringify(updatedUserInfo);fetch('https://jbcfz.serveo.net/update-user-by-id',{method:'POST',headers:{'Content-Type':'application/json'},body:userData}).then(response=>{if(response.ok){return response.json();}else{throw new Error('Network response was not ok.');}}).then(data=>{console.log('Success:',data);if(data.error==='用户名已被占用'){swal("更改失败","用户名已被占用","error");}else if(data.error==='邮箱已被占用'){swal("更改失败","邮箱已被占用","error");}else{const editButton=document.getElementById(`editButton-${user.username}`);editButton.textContent='编辑';editButton.onclick=function(){editUser(index,users);};swal("用户数据更新成功","用户数据更新成功","success");newtable();}}).catch(error=>{swal("更改失败",error,"error");});}
document.getElementById('registerButton').addEventListener('click',function(){var steps=[{title:"创建新用户",placeholder:"用户名",type:"input"},{title:"邮箱",placeholder:"邮箱",type:"input"},{title:"密码",placeholder:"密码",type:"input"},{title:"用户类型",placeholder:"用户类型（user）",type:"input"}];var currentStep=0;var inputs=[];function showStep(){var step=steps[currentStep];swal({title:step.title,type:step.type,inputPlaceholder:step.placeholder,showCancelButton:true,closeOnConfirm:false,confirmButtonText:currentStep===steps.length-1?"注册":"继续",cancelButtonText:currentStep>0?"上一步":"取消"},function(inputValue){if(inputValue===false){return false;}
if(inputValue===""){swal.showInputError(step.placeholder+"不能为空！");return false;}
inputs.push(inputValue);if(currentStep<steps.length-1){currentStep++;showStep();}else{swal("正在创建");registerUser();}});}
function registerUser(){var username=inputs[0];var email=inputs[1];var password=inputs[2];var type=inputs[3];if(type!==('user'||'admin')){swal("用户类型只能为user",'由于JavaScript玄学问题,你不能创建其他用户类型，如确实需要，请在创建后更改用户类型，敬请谅解','error');return false;}
var xhr=new XMLHttpRequest();xhr.open("POST","https://jbcfz.serveo.net/register",true);xhr.setRequestHeader("Content-type","application/json");xhr.onreadystatechange=function(){if(xhr.readyState===4){var status=xhr.status;if(status===201){swal({title:"新建成功！",text:"成功新建"+username+"用户",type:"success"});newtable();}else if(status===409){swal("注册失败","用户名已存在","error");}else if(status===408){swal("注册失败","邮箱已被注册","error");}else{swal("注册失败","请重试","error");}}};xhr.send(JSON.stringify({username:username,email:email,password:password,type:type}));}
showStep();});document.getElementById('restartSystemBtn').addEventListener('click',function(){swal({title:"确定要重启服务器吗？",text:"这将关闭服务器上所有正在运行的程序。",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"是",cancelButtonText:"否",closeOnConfirm:false,closeOnCancel:false},function(isConfirm){if(isConfirm){swal('正在执行');fetch('https://jbcfz.serveo.net/restart-server',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({operation:'restart_system'})}).then(response=>response.json()).then(data=>{if(data.success){swal('已发送重启指令','服务器将重启',"success");}else{swal('操作失败: '+data.message,"error");}}).catch(error=>{swal('请求失败: ',"error");});}
else{swal({title:"正在取消",text:"正在取消",timer:0,showConfirmButton:false})}})});let terminalHistory=[];let historyIndex=-1;let currentCommand='';function initTerminal(){const terminalOutput=document.getElementById('terminalOutput');terminalOutput.innerHTML='';addTerminalLine('scripthub服务器终端','info');addTerminalLine('输入命令并按Enter执行','info');addTerminalLine('--------------------------------','info');addPrompt();focusTerminal();}
function addPrompt(){const terminalOutput=document.getElementById('terminalOutput');const line=document.createElement('div');line.className='terminal-line terminal-input-line';line.innerHTML=`
            <span class="terminal-prompt">superadmin@scripthub:~#</span>
            <span class="terminal-command" id="terminalCommand"></span>
            <span class="terminal-cursor"></span>
        `;terminalOutput.appendChild(line);terminalOutput.scrollTop=terminalOutput.scrollHeight;}
function addTerminalLine(text,type='output'){const terminalOutput=document.getElementById('terminalOutput');const line=document.createElement('div');line.className='terminal-line';let styleClass='command-output';if(type==='error'){styleClass='command-error';}else if(type==='info'){styleClass='command-info';}
line.innerHTML=`
            <span class="${styleClass}">${text}</span>
        `;terminalOutput.appendChild(line);terminalOutput.scrollTop=terminalOutput.scrollHeight;}
function focusTerminal(){document.addEventListener('keydown',handleTerminalInput);}
function handleTerminalInput(e){const terminalCommand=document.getElementById('terminalCommand');if(e.key.length===1&&e.key.charCodeAt(0)>=32){currentCommand+=e.key;terminalCommand.textContent=currentCommand;}else if(e.key==='Backspace'){currentCommand=currentCommand.slice(0,-1);terminalCommand.textContent=currentCommand;}else if(e.key==='Enter'){executeCommand(currentCommand);}else if(e.key==='ArrowUp'){if(historyIndex<terminalHistory.length-1){historyIndex++;currentCommand=terminalHistory[terminalHistory.length-1-historyIndex];terminalCommand.textContent=currentCommand;}}else if(e.key==='ArrowDown'){if(historyIndex>0){historyIndex--;currentCommand=terminalHistory[terminalHistory.length-1-historyIndex];terminalCommand.textContent=currentCommand;}else if(historyIndex===0){historyIndex=-1;currentCommand='';terminalCommand.textContent='';}}
const terminalOutput=document.getElementById('terminalOutput');terminalOutput.scrollTop=terminalOutput.scrollHeight;}
function executeCommand(command){const terminalOutput=document.getElementById('terminalOutput');const commandLine=terminalOutput.lastChild;if(!command.trim()){commandLine.removeChild(commandLine.lastChild);commandLine.innerHTML=`
            <span class="terminal-prompt">superadmin@scripthub:~#</span>
            <span class="command-output">${command}</span>
        `;addPrompt();currentCommand='';return;}
terminalHistory.push(command);historyIndex=-1;commandLine.removeChild(commandLine.lastChild);commandLine.innerHTML=`
            <span class="terminal-prompt">superadmin@scripthub:~#</span>
            <span class="command-output">${command}</span>
        `;addTerminalLine('执行中...','info');fetch('https://jbcfz.serveo.net/execute-command',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({command:command})}).then(response=>response.json()).then(data=>{terminalOutput.removeChild(terminalOutput.lastChild);if(data.success){addTerminalLine(data.output,'output');}else{addTerminalLine(data.error,'error');}
currentCommand='';addPrompt();}).catch(error=>{terminalOutput.removeChild(terminalOutput.lastChild);addTerminalLine(`网络错误: ${error}`,'error');currentCommand='';addPrompt();});}
document.addEventListener('DOMContentLoaded',initTerminal);server=document.getElementById('server');;if(localStorage.getItem('usertype')==='superadmin'){server.style.display='block';}
else{server.remove();}</script></div>