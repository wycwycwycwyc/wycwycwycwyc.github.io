<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>双人贪吃蛇大作战</title>
<script src="/js/script14_serverUrl.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/css/styles_button.css">
    <script src="/js/script4_goBackOrHome.js"></script>
    <script src="/js/script13_checkIslogin.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>
    <link href="/css/message.min.css" rel="stylesheet" />
    <script src="/js/message.min.js"></script>
    <link rel="stylesheet" href="./style.css">
    <script src="./snakegamepro.js"></script>
<button id="back" class="custom-button" style="position: fixed; top: 120px; left: 10px;z-index: 10;" onclick="goBackOrHome()">返回</button>
</head>
<body>
    <!-- 添加到character-selection div之后 -->
<div class="map-selection">
    <h2 class="selection-title">选择地图</h2>
    <div class="map-options">
        <div class="map-option" data-map="default">
            <div class="map-preview" style="background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);"></div>
            <div class="map-name">默认地图</div>
            <div class="map-desc">经典双蛇对战地图</div>
        </div>
        <div class="map-option" data-map="snow">
            <div class="map-preview" style="background: linear-gradient(135deg, #1e3c72, #2a5298, #7b4397);"></div>
            <div class="map-name">雪山地图</div>
            <div class="map-desc">暴风雪天气挑战</div>
        </div>
        <div class="map-option" data-map="volcano">
            <div class="map-preview" style="background: linear-gradient(135deg, #8B0000, #FF4500, #FF8C00);"></div>
            <div class="map-name">火山地图</div>
            <div class="map-desc">火山喷发挑战</div>
        </div>        
    </div>
    <button class="start-game-btn" disabled>开始游戏</button>
</div>
    <button id="view-records"style="position: absolute;top: 20px;right: 20px; background: rgba(255,255,255,0.2);border: none;color: white;padding: 5px 10px;border-radius: 5px;cursor: pointer;z-index: 10;">查看战绩</button>
            <div id="records-modal" class="modal">
            <div class="modal-content" style="max-width: 800px;">
                <span class="close-modal">&times;</span>
                <h2>玩家对战记录</h2>
                <div class="search-controls">
                    <input type="text" id="search-username" placeholder="搜索玩家...">
                    <button id="refresh-records">刷新</button>
                </div>
                <div id="records-container"></div>
            </div>
        </div>
    <div class="game-container">
        <div class="start-screen">
            <h1 class="game-title">🐍 双人贪吃蛇 🐍</h1>
            <button class="start-btn">开始游戏</button>
            <div class="instructions">
                <p>两条蛇各有10点生命值，撞到对方蛇身会扣血并缩短</p>
                <p>活到最后的玩家获胜！</p>
                
                <div class="player-instructions">
                    <div class="player-instruction player-1-instruction">
                        <h3><i class="fas fa-fire"></i> 玩家1 (橙色)</h3>
                        <p>使用WASD控制</p>
                        <div>
                            <div class="key">W</div>
                            <div class="key">A</div>
                            <div class="key">S</div>
                            <div class="key">D</div>
                        </div>
                    </div>
                    
                    <div class="player-instruction player-2-instruction">
                        <h3><i class="fas fa-tint"></i> 玩家2 (蓝色)</h3>
                        <p>使用方向键控制</p>
                        <div>
                            <div class="key">↑</div>
                            <div class="key">←</div>
                            <div class="key">↓</div>
                            <div class="key">→</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="particles" id="particles"></div>
        
        <div id="game-board"></div>
        
        <!-- 状态效果显示 -->
        <div class="status-effect player-1-effect" id="player1-effect"></div>
        <div class="status-effect player-2-effect" id="player2-effect"></div>
        
    <div class="game-over">
        <h2 class="winner-banner" id="winner-banner">游戏结束!</h2>
        <!-- 新增比分显示 -->
        <div class="score-display">
            <div id="winner-name">获胜者: <span id="winner-player"></span></div>
            <div class="final-score" id="final-score">0:0</div>
        </div>
        <div class="buttons-container">
            <button class="restart-btn upload-btn" id="upload-record">上传战绩</button>
            <button class="restart-btn">再来一局</button>
        </div>
    </div>
    </div>
        <div class="score-board">
            <div class="player-score player-1">
                <div class="score-display">
                    <span class="player-name" id="player1-name">玩家1: </span>
                    <span class="score-text" id="score-1">0分</span>
                </div>
                <div class="health-display">
                    <span>生命值: </span>
                    <div class="health-bar">
                        <div class="health-fill" id="health-1" style="width: 100%;"></div>
                    </div>
                    <span id="health-text-1">10HP</span>
                </div>
            </div>
            <div class="player-score player-2">
                <div class="score-display">
                    <span class="player-name" id="player2-name">玩家2: </span>
                    <span class="score-text" id="score-2">0分</span>
                </div>
                <div class="health-display">
                    <span>生命值: </span>
                    <div class="health-bar">
                        <div class="health-fill" id="health-2" style="width: 100%;"></div>
                    </div>
                    <span id="health-text-2">10HP</span>
                </div>
            </div>
        </div>
        <div class="ball-storage player-1-storage">
            <div id ="storage-title1" class="storage-title">玩家1储存:</div>
            <div class="ball-slot" id="p1-slot-1"><span class="key-hint">1</span></div>
            <div class="ball-slot" id="p1-slot-2"><span class="key-hint">2</span></div>
            <div class="ball-slot" id="p1-slot-3"><span class="key-hint">3</span></div>
            <div class="ball-slot" id="p1-slot-4"><span class="key-hint">4</span></div>
            <div class="ball-slot" id="p1-slot-5"><span class="key-hint">5</span></div>
        </div>
        
        <div class="ball-storage player-2-storage">
            <div id ="storage-title2" class="storage-title">玩家2储存:</div>
            <div class="ball-slot" id="p2-slot-1"><span class="key-hint">6</span></div>
            <div class="ball-slot" id="p2-slot-2"><span class="key-hint">7</span></div>
            <div class="ball-slot" id="p2-slot-3"><span class="key-hint">8</span></div>
            <div class="ball-slot" id="p2-slot-4"><span class="key-hint">9</span></div>
            <div class="ball-slot" id="p2-slot-5"><span class="key-hint">0</span></div>
        </div>       
        <!-- 角色选择界面 -->
        <div class="character-selection">
            <h2 class="selection-title">选择你的蛇</h2>
            
            <div class="player-selections">
<div class="player-selection">
    <div class="player-label" id="player-label1">玩家1 (橙色)</div>
    <div class="snake-options">
        <div class="snake-option speed-snake" data-player="1" data-type="speed">
            <div class="snake-type" style="color: #FFD700;">
                速度蛇 <span class="speed-rating">★★★★★</span>
            </div>
            <div class="snake-desc">
                <span class="health-rating">生命: ★★☆☆☆</span> | 
                <span class="magic-rating">魔法: ★☆☆☆☆</span>
            </div>
        </div>
        
        <div class="snake-option tough-snake" data-player="1" data-type="tough">
            <div class="snake-type" style="color: #C0C0C0;">
                坚硬蛇 <span class="health-rating">生命: ★★★★★</span>
            </div>
            <div class="snake-desc">
                <span class="speed-rating">速度: ★★☆☆☆</span> | 
                <span class="magic-rating">魔法: ★☆☆☆☆</span>
            </div>
        </div>
        
        <div class="snake-option magic-snake" data-player="1" data-type="magic">
            <div class="snake-type" style="color: #9C27B0;">
                魔法蛇 <span class="magic-rating">魔法: ★★★★★</span>
            </div>
            <div class="snake-desc">
                <span class="health-rating">生命: ★★★☆☆</span> | 
                <span class="speed-rating">速度: ★★★☆☆</span>
            </div>
        </div>
    </div>
</div>

<div class="player-selection">
    <div class="player-label" id="player-label2">玩家2 (蓝色)</div>
    <div class="snake-options">
        <div class="snake-option speed-snake" data-player="2" data-type="speed">
            <div class="snake-type" style="color: #FFD700;">
                速度蛇 <span class="speed-rating">★★★★★</span>
            </div>
            <div class="snake-desc">
                <span class="health-rating">生命: ★★☆☆☆</span> | 
                <span class="magic-rating">魔法: ★☆☆☆☆</span>
            </div>
        </div>
        
        <div class="snake-option tough-snake" data-player="2" data-type="tough">
            <div class="snake-type" style="color: #C0C0C0;">
                坚硬蛇 <span class="health-rating">生命: ★★★★★</span>
            </div>
            <div class="snake-desc">
                <span class="speed-rating">速度: ★★☆☆☆</span> | 
                <span class="magic-rating">魔法: ★☆☆☆☆</span>
            </div>
        </div>
        
        <div class="snake-option magic-snake" data-player="2" data-type="magic">
            <div class="snake-type" style="color: #9C27B0;">
                魔法蛇 <span class="magic-rating">魔法: ★★★★★</span>
            </div>
            <div class="snake-desc">
                <span class="health-rating">生命: ★★★☆☆</span> | 
                <span class="speed-rating">速度: ★★★☆☆</span>
            </div>
        </div>
    </div>
</div>  
            
            <button class="start-game-btn">开始游戏</button>
        </div>
                <!-- 添加到body的末尾 -->
        <div id="snake-details-modal" class="modal">
            <div class="modal-content">
                <span class="close-modal">&times;</span>
                <h2>蛇类特性详情</h2>
                <div id="snake-details-content"></div>
            </div>
        </div>
</body>
</html>