document.addEventListener('DOMContentLoaded',function(){const savedBrightness=localStorage.getItem('brightness');const defaultBrightness=savedBrightness!==null?savedBrightness:1;const brightnessRange=document.getElementById('brightnessRange');const brightnessNumber=document.getElementById('brightnessNumber');const brightnessOverlay=document.createElement('div');brightnessOverlay.classList.add('brightness-overlay');document.body.appendChild(brightnessOverlay);brightnessOverlay.style.opacity=1-defaultBrightness;if(brightnessRange&&brightnessNumber){brightnessRange.value=defaultBrightness*100;brightnessNumber.value=defaultBrightness*100;brightnessRange.addEventListener('input',function(){const brightness=brightnessRange.value;brightnessNumber.value=brightness;brightnessOverlay.style.opacity=1-brightness/100;localStorage.setItem('brightness',brightness/100);});brightnessNumber.addEventListener('input',function(){let brightness=brightnessNumber.value;if(brightness.length>3){brightness=brightness.slice(0,3);}
if(brightness<0)brightness=0;if(brightness>100)brightness=100;if(brightness.length>1&&brightness.startsWith('0')){brightness=brightness.slice(1);}
brightnessNumber.value=brightness;brightnessRange.value=brightness;brightnessOverlay.style.opacity=1-brightness/100;localStorage.setItem('brightness',brightness/100);});}});